monitoring-example/
â”‚
â”œâ”€â”€ Configuration Files
â”‚   â”œâ”€â”€ docker-compose.yml              âœ… Main orchestration (14 services)
â”‚   â”œâ”€â”€ otel-collector-config.yaml     âœ… OpenTelemetry Collector config
â”‚   â”œâ”€â”€ prometheus.yml                  âœ… Prometheus scrape config
â”‚   â”œâ”€â”€ tempo.yaml                      âœ… Tempo tracing config
â”‚   â”œâ”€â”€ loki.yaml                       âœ… Loki log aggregation config
â”‚   â”œâ”€â”€ .env.example                    âœ… Environment variables template
â”‚   â””â”€â”€ .gitignore                      âœ… Git ignore rules
â”‚
â”œâ”€â”€ Documentation
â”‚   â”œâ”€â”€ README.md                       âœ… Main documentation (comprehensive)
â”‚   â”œâ”€â”€ QUICKSTART.md                   âœ… 5-minute getting started guide
â”‚   â”œâ”€â”€ ARCHITECTURE.md                 âœ… Detailed architecture (300+ lines)
â”‚   â”œâ”€â”€ PROJECT_SUMMARY.md              âœ… Complete feature overview
â”‚   â””â”€â”€ FILE_STRUCTURE.txt              âœ… This file
â”‚
â”œâ”€â”€ Build & Deploy Scripts
â”‚   â”œâ”€â”€ Makefile                        âœ… Convenience commands
â”‚   â”œâ”€â”€ start.sh                        âœ… Quick start script
â”‚   â””â”€â”€ scripts/
â”‚       â”œâ”€â”€ generate-traffic.py         âœ… Python traffic generator
â”‚       â””â”€â”€ generate-traffic.sh         âœ… Shell traffic generator wrapper
â”‚
â”œâ”€â”€ Frontend (React SPA)
â”‚   â””â”€â”€ frontend/
â”‚       â”œâ”€â”€ Dockerfile                  âœ… Multi-stage build
â”‚       â”œâ”€â”€ nginx.conf                  âœ… Nginx configuration
â”‚       â”œâ”€â”€ package.json                âœ… Dependencies
â”‚       â”œâ”€â”€ public/
â”‚       â”‚   â””â”€â”€ index.html              âœ… HTML template
â”‚       â””â”€â”€ src/
â”‚           â”œâ”€â”€ index.js                âœ… App entry point
â”‚           â”œâ”€â”€ index.css               âœ… Global styles
â”‚           â”œâ”€â”€ App.js                  âœ… Main component
â”‚           â”œâ”€â”€ App.css                 âœ… App styles
â”‚           â””â”€â”€ monitoring.js           âœ… Grafana Faro setup
â”‚
â”œâ”€â”€ Backend Services
â”‚   â””â”€â”€ services/
â”‚       â”‚
â”‚       â”œâ”€â”€ main-service/ (FastAPI - Python)
â”‚       â”‚   â”œâ”€â”€ Dockerfile              âœ… Python 3.11 image
â”‚       â”‚   â”œâ”€â”€ requirements.txt        âœ… Python dependencies
â”‚       â”‚   â””â”€â”€ main.py                 âœ… FastAPI app (500+ lines)
â”‚       â”‚       â€¢ Products management
â”‚       â”‚       â€¢ Shopping cart
â”‚       â”‚       â€¢ Checkout flow
â”‚       â”‚       â€¢ Order management
â”‚       â”‚       â€¢ PostgreSQL integration
â”‚       â”‚       â€¢ Redis caching
â”‚       â”‚       â€¢ OpenTelemetry auto-instrumentation
â”‚       â”‚       â€¢ Prometheus metrics
â”‚       â”‚       â€¢ Pyroscope profiling
â”‚       â”‚
â”‚       â”œâ”€â”€ payments-service/ (Go)
â”‚       â”‚   â”œâ”€â”€ Dockerfile              âœ… Multi-stage Go build
â”‚       â”‚   â”œâ”€â”€ go.mod                  âœ… Go module definition
â”‚       â”‚   â”œâ”€â”€ go.sum                  âœ… Go dependencies
â”‚       â”‚   â””â”€â”€ main.go                 âœ… Gin app (300+ lines)
â”‚       â”‚       â€¢ Payment processing
â”‚       â”‚       â€¢ External provider calls
â”‚       â”‚       â€¢ Country-specific metrics
â”‚       â”‚       â€¢ OpenTelemetry instrumentation
â”‚       â”‚       â€¢ Prometheus metrics
â”‚       â”‚
â”‚       â”œâ”€â”€ promotions-service/ (C# .NET)
â”‚       â”‚   â”œâ”€â”€ Dockerfile              âœ… .NET 8 multi-stage
â”‚       â”‚   â”œâ”€â”€ PromotionsService.csproj âœ… Project file
â”‚       â”‚   â”œâ”€â”€ Program.cs              âœ… ASP.NET Core setup
â”‚       â”‚   â””â”€â”€ Controllers/
â”‚       â”‚       â””â”€â”€ PromotionsController.cs âœ… API controller
â”‚       â”‚           â€¢ Promotion checking
â”‚       â”‚           â€¢ Discount calculation
â”‚       â”‚           â€¢ External API integration
â”‚       â”‚           â€¢ OpenTelemetry instrumentation
â”‚       â”‚
â”‚       â””â”€â”€ external/ (Node.js - External Services)
â”‚           â”‚
â”‚           â”œâ”€â”€ payment-provider/
â”‚           â”‚   â”œâ”€â”€ Dockerfile          âœ… Node.js 20
â”‚           â”‚   â”œâ”€â”€ package.json        âœ… Dependencies
â”‚           â”‚   â””â”€â”€ index.js            âœ… Express app
â”‚           â”‚       â€¢ Simulated payment gateway
â”‚           â”‚       â€¢ Country-specific failure rates
â”‚           â”‚       â€¢ Random error responses (400, 404, 500, 503, 429)
â”‚           â”‚       â€¢ OpenTelemetry auto-instrumentation
â”‚           â”‚
â”‚           â”œâ”€â”€ crm-system/
â”‚           â”‚   â”œâ”€â”€ Dockerfile          âœ… Node.js 20
â”‚           â”‚   â”œâ”€â”€ package.json        âœ… Dependencies
â”‚           â”‚   â””â”€â”€ index.js            âœ… Express app
â”‚           â”‚       â€¢ Customer data management
â”‚           â”‚       â€¢ 8% random failure rate
â”‚           â”‚       â€¢ OpenTelemetry auto-instrumentation
â”‚           â”‚
â”‚           â”œâ”€â”€ inventory-system/
â”‚           â”‚   â”œâ”€â”€ Dockerfile          âœ… Node.js 20
â”‚           â”‚   â”œâ”€â”€ package.json        âœ… Dependencies
â”‚           â”‚   â”œâ”€â”€ README.md           âœ… Documentation
â”‚           â”‚   â””â”€â”€ index.js            âœ… Express app
â”‚           â”‚       â€¢ Inventory management
â”‚           â”‚       â€¢ Multi-warehouse support
â”‚           â”‚       â€¢ 10% random failure rate
â”‚           â”‚       â€¢ OpenTelemetry auto-instrumentation
â”‚           â”‚
â”‚           â””â”€â”€ promotions-service/
â”‚               â”œâ”€â”€ Dockerfile          âœ… Node.js 20
â”‚               â”œâ”€â”€ package.json        âœ… Dependencies
â”‚               â””â”€â”€ index.js            âœ… Express app
â”‚                   â€¢ Third-party promotions
â”‚                   â€¢ 12% random failure rate
â”‚                   â€¢ Country-specific discounts
â”‚                   â€¢ OpenTelemetry auto-instrumentation
â”‚
â””â”€â”€ Grafana Configuration
    â””â”€â”€ grafana/
        â”œâ”€â”€ provisioning/
        â”‚   â”œâ”€â”€ datasources/
        â”‚   â”‚   â””â”€â”€ datasources.yml     âœ… Auto-provisioned data sources
        â”‚   â”‚       â€¢ Prometheus
        â”‚   â”‚       â€¢ Tempo (with trace-to-logs)
        â”‚   â”‚       â€¢ Loki (with trace correlation)
        â”‚   â”‚       â€¢ Pyroscope
        â”‚   â”‚
        â”‚   â””â”€â”€ dashboards/
        â”‚       â””â”€â”€ dashboards.yml      âœ… Dashboard auto-loading
        â”‚
        â””â”€â”€ dashboards/
            â””â”€â”€ webstore-overview.json  âœ… WebStore dashboard
                â€¢ Cart additions by country
                â€¢ Checkout rates
                â€¢ Payment failure rates
                â€¢ Active carts
                â€¢ Time series graphs
                â€¢ Status tables


OBSERVABILITY STACK (Docker Compose Services)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Infrastructure:
  âœ… postgres          - PostgreSQL 15 database
  âœ… redis             - Redis 7 cache
  âœ… otel-collector    - OpenTelemetry Collector (OTLP gRPC/HTTP)
  âœ… prometheus        - Prometheus metrics storage (port 9090)
  âœ… tempo             - Grafana Tempo distributed tracing (port 3200)
  âœ… loki              - Grafana Loki log aggregation (port 3100)
  âœ… pyroscope         - Grafana Pyroscope profiling (port 4040)
  âœ… grafana           - Grafana dashboards (port 3000)

Application Services:
  âœ… main-service      - FastAPI backend (port 8000)
  âœ… payments-service  - Go microservice (port 8081)
  âœ… promotions-service - C# microservice (port 8082)
  âœ… payment-provider  - External Node.js (port 3001)
  âœ… crm-system        - External Node.js (port 3002)
  âœ… inventory-system  - External Node.js (port 3003)
  âœ… frontend          - React SPA (port 3001 - nginx)


KEY FEATURES IMPLEMENTED
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… Monitoring & Observability:
   â€¢ Auto-instrumented endpoints (all HTTP routes)
   â€¢ Custom cart addition metrics with country labels
   â€¢ Distributed tracing across all services
   â€¢ Payment monitoring by country
   â€¢ External service call monitoring with duration tracking
   â€¢ Simulated failures (400, 404, 500, 503, 429)
   â€¢ Token-based authentication (hardcoded opaque tokens)
   â€¢ Frontend RUM with Grafana Faro
   â€¢ Continuous profiling with Pyroscope

âœ… Technical Stack:
   â€¢ React SPA with Grafana Faro
   â€¢ FastAPI with OpenTelemetry
   â€¢ Go with Gin + OpenTelemetry
   â€¢ C# .NET 8 with OpenTelemetry
   â€¢ Node.js with auto-instrumentation
   â€¢ PostgreSQL database
   â€¢ Redis cache
   â€¢ Prometheus + Tempo + Loki + Pyroscope
   â€¢ Grafana with pre-configured dashboards

âœ… Data Flow:
   Applications â†’ OpenTelemetry Collector â†’ Backends (Prometheus/Tempo/Loki)
   All telemetry flows through OTLP (gRPC) to the collector

âœ… Geographic Simulation:
   ğŸ‡ºğŸ‡¸ US    (5% payment failure)
   ğŸ‡¬ğŸ‡§ UK    (7% payment failure)
   ğŸ‡©ğŸ‡ª DE    (6% payment failure)
   ğŸ‡«ğŸ‡· FR    (8% payment failure)
   ğŸ‡¯ğŸ‡µ JP    (10% payment failure)
   ğŸ‡§ğŸ‡· BR    (15% payment failure)
   ğŸ‡®ğŸ‡³ IN    (12% payment failure)

âœ… Authentication:
   â€¢ user-token-123
   â€¢ admin-token-456
   â€¢ test-token-789


COMMANDS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Start Everything:
  ./start.sh                    # Quick start with health checks
  make start                    # Alternative using Make
  docker-compose up -d          # Direct docker-compose

Generate Traffic:
  cd scripts
  python3 generate-traffic.py --users 5 --duration 60
  
  # Or with Make
  make traffic                  # 5 users, 60 seconds
  make traffic-heavy            # 20 users, 120 seconds

View Logs:
  make logs                     # All services
  make logs-main               # Main service only
  docker-compose logs -f        # All services

Stop Everything:
  make stop                     # Stop services
  make clean                    # Stop and remove data
  docker-compose down -v        # Direct command


QUICK ACCESS URLS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  ğŸŒ Frontend:     http://localhost:3001
  ğŸ”§ Main API:     http://localhost:8000
  ğŸ“Š Grafana:      http://localhost:3000
  ğŸ“ˆ Prometheus:   http://localhost:9090
  ğŸ” Tempo:        http://localhost:3200
  ğŸ“ Loki:         http://localhost:3100
  ğŸ”¥ Pyroscope:    http://localhost:4040


FILE STATISTICS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Total files created:     50+
Lines of code:           ~5,000+
Documentation pages:     4 (README, QUICKSTART, ARCHITECTURE, SUMMARY)
Services:                14 (7 app + 7 infra)
Languages:               Python, Go, C#, JavaScript, YAML, JSON
Configuration files:     10+
Docker images:           14
Supported countries:     7
Failure scenarios:       3 external services with variable rates
